<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title th:text="${product.name}">ì˜ˆì ê¸ˆ ìƒí’ˆ ìƒì„¸</title>
<style>
body {
	font-family: 'Noto Sans KR', sans-serif;
	margin: 0;
	background: #f5f5f5;
}

.container {
	max-width: 1000px;
	margin: 30px auto;
	background: white;
	padding: 30px;
	border-radius: 10px;
	box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
}

.header h1 {
	margin: 0;
	font-size: 1.8rem;
}

.info-box {
	display: flex;
	justify-content: space-around;
	margin: 20px 0;
	text-align: center;
}

.info-box div {
	font-weight: bold;
	font-size: 1.1rem;
}

.calc-container {
	background: #fefefe;
	padding: 20px;
	border: 1px solid #ccc;
	border-radius: 10px;
	margin: 40px 0;
}

.btn {
	background: #007bff;
	color: white;
	border: none;
	padding: 10px 20px;
	margin: 10px;
	border-radius: 5px;
	cursor: pointer;
}

.btn:hover {
	background: #0056b3;
}

.modal {
	display: none;
	position: fixed;
	z-index: 999;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	background: rgba(0, 0, 0, 0.5);
}

.modal-content {
	background: white;
	margin: 5% auto;
	padding: 20px;
	border-radius: 10px;
	width: 90%;
	max-width: 600px;
	max-height: 80vh;
	overflow-y: auto;
}
/* ì¶”ê°€ ìŠ¤íƒ€ì¼ (í•„ìš” ì‹œ head ì˜ì—­ì— í¬í•¨) */
#detailContent section {
  display: flex;
  align-items: center;
  justify-content: center; /* âœ… ì „ì²´ë¥¼ í˜ì´ì§€ ê°€ìš´ë° ì •ë ¬ */
  margin: 50px 0;
  flex-direction: row;
  max-width: 900px; /* âœ… ë„“ì´ ì œí•œ */
  margin-left: auto;
  margin-right: auto;
}

#detailContent section.reverse {
  flex-direction: row-reverse;
}

#detailContent section .text-wrap {
  flex: 1;
  padding: 0 20px;
  text-align: left;
}

#detailContent section.reverse .text-wrap {
  text-align: right;
}

#detailContent section h2 {
  font-size: 1.6rem;       /* ê¸°ì¡´ 1.4 â†’ ë” í¼ */
  font-weight: bold;       /* âœ… ë³¼ë“œ ì ìš© */
  margin-bottom: 10px;
}

#detailContent section p {
  font-size: 1.2rem;       /* ê¸°ì¡´ 1.1 â†’ ì¡°ê¸ˆ í‚¤ì›€ */
  font-weight: 500;        /* âœ… ì¤‘ê°„ ë³¼ë“œ (ë„ˆë¬´ ë‘ê»ì§€ ì•Šê²Œ) */
  line-height: 1.7;
  margin: 0;
}

#detailContent section img {
  width: 240px;
  height: auto;
  border-radius: 8px;
  object-fit: cover;
  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
}




</style>
</head>
<body>
	<!-- ğŸŸ¢ ìƒë‹¨ ì •ë³´ -->
	<div class="header" style="text-align: center;">
		<h1 th:text="${product.name}" style="margin-bottom: 8px;">ìƒí’ˆëª…</h1>
		<p th:text="${product.summary}" style="font-size: 1rem; color: #666;">ìƒí’ˆ
			ìš”ì•½</p>
	</div>

	<!-- ğŸŸ¢ ê¸ˆë¦¬/ê¸°ê°„ ì •ë³´ ë°•ìŠ¤ -->
	<div class="info-box">
		<div>
			<span style="color: #d9230f; font-size: 1.4rem;"
				th:text="${#numbers.formatDecimal(product.maxRate,1,'POINT',2,'POINT')} + '%'">4.50%</span><br>
			<small>ìµœê³ ê¸ˆë¦¬</small>
		</div>
		<div>
			<span style="font-size: 1.2rem;"
				th:text="${#numbers.formatDecimal(product.minRate,1,'POINT',2,'POINT')} + '%'">2.50%</span><br>
			<small>ìµœì €ê¸ˆë¦¬</small>
		</div>
		<div>
			<span style="font-size: 1.2rem;" th:text="${product.period}">12</span>
			ê°œì›”<br> <small>ê°€ì…ê¸°ê°„</small>
		</div>
	</div>



	<hr>

	<!-- ìƒì„¸ ì„¤ëª… ì˜ì—­ (7ê°œ ì„¹ì…˜ í¬í•¨) -->
	<div id="detailContent" th:utext="${product.detail}">ìƒì„¸ ì„¤ëª…</div>

	</div>

	<div class="calc-container" style="text-align: center;">
		<h3 style="font-size: 1.5rem; margin-bottom: 20px;">ğŸ’° ê°„í¸ ì´ì ê³„ì‚°ê¸°</h3>

		<div
			style="display: inline-flex; flex-wrap: wrap; align-items: center; gap: 15px; font-size: 1.2rem; justify-content: center;">
			<label> ì´ ìƒí’ˆì„ <input id="monthsInput" type="text"
				th:value="${product.period}"
				style="width: 60px; padding: 10px; text-align: right; font-size: 1.1rem;" />
				<span>ê°œì›” ê°„</span>
			</label> <label> <input id="depositAmount" type="text"
				value="1,000,000"
				style="width: 170px; padding: 10px; text-align: right; font-size: 1.1rem;" />
				<span>ì›ìœ¼ë¡œ</span>
			</label> <label> ê¸ˆë¦¬ ì—° <input id="rateInput" type="text"
				th:value="${#numbers.formatDecimal(product.maxRate,1,'POINT',2,'POINT')}"
				style="width: 70px; padding: 10px; text-align: right; font-size: 1.1rem;" />
				<span>%ë¥¼ ì ìš©í•˜ë©´?</span>
			</label>
		</div>

		<br>
		<button class="btn" style="margin-top: 20px;" onclick="calcInterest()">âœ”
			ê²°ê³¼ë³´ê¸°</button>

		<div style="margin-top: 25px; font-size: 1.3rem;">
			ì„¸ì „ ì´ì: <b id="interestResult"
				style="font-size: 1.5rem; color: #1565c0;">0</b> ì›
		</div>
	</div>

	<div style="text-align: center;">
		<a href="/deposit/list" class="btn">ëª©ë¡ìœ¼ë¡œ</a>
		<button class="btn" onclick="openModal()">ìƒí’ˆ ì´ìš© ê°€ì´ë“œ</button>
		<button class="btn" onclick="openRateModal()">ê¸ˆë¦¬í‘œ ë³´ê¸°</button>
	</div>


	<!-- ëª¨ë‹¬ì°½ -->
	<div id="productModal" class="modal">
		<div class="modal-content" style="position: relative;">
			<span class="close" onclick="closeModal()">&times;</span>
			<h2 style="text-align: center; margin-top: 0;">ìƒí’ˆ ì´ìš© ê°€ì´ë“œ</h2>
			<div th:utext="${modalDetailForModal}" style="margin-bottom: 20px;">ê°€ì´ë“œ
				ë‚´ìš©</div>

			<!-- âœ… í•˜ë‹¨ ë‹«ê¸° ë²„íŠ¼ -->
			<div style="text-align: center;">
				<button class="btn" onclick="closeModal()">ë‹«ê¸°</button>
			</div>
		</div>
	</div>
	
	<!-- ê¸ˆë¦¬í‘œ ëª¨ë‹¬ -->
<div id="rateModal" class="modal">
  <div class="modal-content" style="position: relative;">
    <span class="close" onclick="closeRateModal()">&times;</span>
    <h2 style="text-align: center; margin-top: 0;">ê¸ˆë¦¬í‘œ</h2>
    <div th:utext="${modalRateTable}" style="margin-bottom: 20px;">
      <!-- ê¸ˆë¦¬í‘œ HTML ì¶œë ¥ -->
    </div>
    <div style="text-align: center;">
      <button class="btn" onclick="closeRateModal()">ë‹«ê¸°</button>
    </div>
  </div>
</div>
	

	<script>
  function openModal() {
    document.getElementById("productModal").style.display = "block";
  }
  function closeModal() {
    document.getElementById("productModal").style.display = "none";
  }
  window.onclick = function(e) {
    if (e.target == document.getElementById("productModal")) {
      closeModal();
    }
  }
  
  function openRateModal() {
	  document.getElementById("rateModal").style.display = "block";
	}
	function closeRateModal() {
	  document.getElementById("rateModal").style.display = "none";
	}
	window.onclick = function(e) {
	  if (e.target === document.getElementById("productModal")) closeModal();
	  if (e.target === document.getElementById("rateModal")) closeRateModal();
	};

  // ì‰¼í‘œ ìë™ ì‚½ì…
 document.getElementById("depositAmount").addEventListener("input", function() {
  const val = this.value.replace(/,/g, '').replace(/\D/g, '');
  this.value = Number(val).toLocaleString();
});

function calcInterest() {
  const amount = Number(document.getElementById("depositAmount").value.replace(/,/g, ''));
  const months = Number(document.getElementById("monthsInput").value);
  const rate = Number(document.getElementById("rateInput").value);

  if (isNaN(amount) || isNaN(months) || isNaN(rate)) {
    alert("ëª¨ë“  ê°’ì„ ìˆ«ìë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”.");
    return;
  }

  const interest = (amount * rate * months) / (12 * 100);
  document.getElementById("interestResult").innerText = Math.floor(interest).toLocaleString();
}


  
  
window.addEventListener("load", () => {
	  const sections = document.querySelectorAll("#detailContent section");

	  sections.forEach((section, i) => {
	    const h2 = section.querySelector("h2");
	    const p = section.querySelector("p");
	    const img = section.querySelector("img");

	    if (h2 && p && img) {
	      const wrapper = document.createElement("div");
	      wrapper.className = "text-wrap";
	      wrapper.appendChild(h2);
	      wrapper.appendChild(p);
	      section.insertBefore(wrapper, img);
	    }

	    // ì§ìˆ˜ë²ˆì§¸ reverse ì ìš©
	    if ([2, 4, 6].includes(i + 1)) {
	      section.classList.add("reverse");
	    }
	  });
	});


</script>
</body>
</html>
