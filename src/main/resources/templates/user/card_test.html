<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8" />
<title>ì†Œë¹„ì„±í–¥ í…ŒìŠ¤íŠ¸</title>
<style>
body {
	font-family: Arial, sans-serif;
	text-align: center;
}

.section {
	display: none;
	padding: 40px;
}

.section.active {
	display: block;
}

#progress-area {
	display: flex;
	justify-content: space-between;
	align-items: center;
	margin-bottom: 20px;
}

#prev-btn {
	background: none;
	border: none;
	color: #555;
	font-size: 16px;
	cursor: pointer;
}

#prev-btn:hover {
	color: #000;
	text-decoration: underline;
}

#progress-bar {
	width: 80%;
	background: #eee;
	height: 10px;
	margin: 20px auto;
	border-radius: 5px;
	overflow: hidden;
}

#progress-fill {
	width: 0%;
	height: 100%;
	background: #4CAF50;
	transition: width 0.3s;
}

.progress-text {
	margin-top: 5px;
	font-size: 14px;
}

.question-img {
	width: 600px;
	border-radius: 8px;
	margin: 20px 0;
}

.question {
	margin: 20px 0;
	font-size: 20px;
	font-weight: bold;
}

#options {
	display: flex;
	justify-content: center;
	gap: 40px; /* ë²„íŠ¼ ê°„ê²© */
	margin-top: 30px;
	flex-wrap: wrap;
}

.option-btn {
	display: inline-block;
	width: 500px;
	height: 80px;
	padding: 20px;
	margin: 10px;
	font-size: 18px;
	border: 2px solid #ccc;
	border-radius: 50px;
	background-color: #f9f9f9;
	box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
	transition: all 0.3s ease;
}

.option-btn:hover {
	background-color: #e6f7ff;
	border-color: #0099ff;
	transform: translateY(-3px);
}

.card-list {
	display: flex;
	flex-wrap: wrap;
	justify-content: center;
	margin-top: 30px;
}

.card-item {
	width: 200px;
	margin: 10px;
	border: 1px solid #ccc;
	border-radius: 8px;
	padding: 10px;
}

.card-item img {
	width: 100%;
	border-radius: 5px;
}
</style>
</head>

<body>
	<h1>ğŸ’³ ë‚´ í†µì¥ì´ í……ì¥ì´ ëœ ì´ìœ ëŠ”?</h1>

	<!-- ì‹œì‘ í™”ë©´ -->
	<div id="start-section" class="section active">
		<img src="/images/cardTest/card_test_main.png" alt="í……ì¥ ë¶„ì„ê¸°"
			width="400" />
		<h2>í……ì¥ë¶„ì„ê¸° í…ŒìŠ¤íŠ¸</h2>
		<p>ë‚´ í†µì¥ì´ í……ì¥ì´ ëœ ì´ìœ ë¥¼ ë¶„ì„í•´ë“œë¦½ë‹ˆë‹¤!</p>
		<p>ë‚˜ì˜ ì†Œë¹„ì„±í–¥ì„ í™•ì¸í•´ë³´ì„¸ìš”!</p>
		<button onclick="startTest()">í…ŒìŠ¤íŠ¸ ì‹œì‘</button>
	</div>

	<!-- ì§ˆë¬¸ í™”ë©´ -->
	<div id="question-section" class="section">
		<!-- ì§„í–‰ ì˜ì—­ -->
		<div id="progress-area">
			<button id="prev-btn" onclick="goBack()">â† ì´ì „</button>
			<div id="progress"></div>
		</div>
		<!-- ì§„í–‰ë°” -->
		<div id="progress-bar">
			<div id="progress-fill"></div>
		</div>
		<div class="progress-text" id="progress-text"></div>

		<!-- ì§ˆë¬¸ ì´ë¯¸ì§€ -->
		<img id="question-img" src="" alt="ì§ˆë¬¸ ì´ë¯¸ì§€" class="question-img" />

		<!-- ì§ˆë¬¸ í…ìŠ¤íŠ¸ -->
		<div id="question-text" class="question"></div>

		<!-- ì„ íƒ ë²„íŠ¼ -->
		<div id="options">
			<button class="option-btn" onclick="selectOption('A')"></button>
			<button class="option-btn" onclick="selectOption('B')"></button>
		</div>
	</div>

	<!-- ê²°ê³¼ í™”ë©´ -->
	<div id="result-section" class="section">
		<h2 id="result-title"></h2>
		<img id="result-img" src="" alt="ê²°ê³¼ ì´ë¯¸ì§€" width="400" />
		<p id="result-desc"></p>
		<h3>ì¶”ì²œ ì¹´ë“œ</h3>
		<div id="recommended-cards" class="card-list"></div>
	</div>

	<script>
  // ì§ˆë¬¸ ë°ì´í„°
  const questions = [
    {
      img: '/images/cardTest/q1.png',
      text: '1ï¸âƒ£ ì‡¼í•‘í•  ë•Œ ë” ì„¤ë ˆëŠ” ìˆœê°„ì€?',
      A: 'íƒë°° ë„ì°© ì•Œë¦¼ ë˜‘ë”±ğŸ“¦',
      B: 'ë§¤ì¥ ê°€ì„œ ì‹¤ë¬¼ ë”± ë³´ëŠ” ìˆœê°„âœ¨',
      typeA: 'ì˜¨ë¼ì¸',
      typeB: 'ì˜¤í”„ë¼ì¸'
    },
    {
      img: '/images/cardTest/q2.png',
      text: '2ï¸âƒ£ ê²°ì œí•  ë•?',
      A: 'â€˜í°ë§Œ ìˆìœ¼ë©´ ë! ê°„í¸ê²°ì œ ìµœê³ â€™',
      B: 'â€˜ì¹´ë“œ êº¼ë‚´ì„œ ê¸ëŠ” ë§› ìˆì–´ì•¼ì§€~â€™',
      typeA: 'ì˜¨ë¼ì¸',
      typeB: 'ì˜¤í”„ë¼ì¸'
    },
    {
      img: '/images/cardTest/q3.png',
      text: '3ï¸âƒ£ ê¸‰í•˜ê²Œ í•„ìš”í•œ ë¬¼ê±´ì´ ìƒê²¼ì„ ë•?',
      A: 'â€˜ì´ëŸ´ ë• ë¡œì¼“ ë°°ì†¡!! ë°”ë¡œ ì£¼ë¬¸ ã„± ã„±â€™',
      B: 'â€˜ì§€ê¸ˆ ë‚˜ê°€ì„œ ì‚¬ì™€ì•¼ì§€!!â€™',
      typeA: 'ì˜¨ë¼ì¸',
      typeB: 'ì˜¤í”„ë¼ì¸'
    },
    {
      img: '/images/cardTest/q4.png',
      text: '4ï¸âƒ£ ì›”ê¸‰ ë“¤ì–´ì˜¤ë©´ ì œì¼ ë¨¼ì € í•˜ëŠ” ìƒê°?',
      A: 'â€˜ì¼ë‹¨ ì €ì¶•ë¶€í„° í•˜ê³ .. ë‚¨ì€ ëˆìœ¼ë¡œ ë²„í…¨ë³´ì!â€™',
      B: 'â€˜íœ´ í•œë‹¬ë™ì•ˆ ë„˜ ê³ ìƒí–ˆë‹¤~~ ì˜¤ëŠ˜ì€ ì—½ë–¡ì— í—ˆë‹ˆì½¤ë³´~~â€™',
      typeA: 'ì €ì¶•',
      typeB: 'ì†Œë¹„'
    },
    {
      img: '/images/cardTest/q5.png',
      text: '5ï¸âƒ£ í• ì¸ ì¿ í°ì´ ìƒê²¼ì„ ë•Œ ë‚˜ëŠ”?',
      A: 'â€˜ì•„ê¹ì§€ë§Œ.. í•„ìš”í•œ ê±´ ì•„ë‹ˆë‹ˆê¹ ì•ˆ ì‚´ë˜ğŸ™…â€â™€ï¸â€™',
      B: 'â€˜ì‹¸ë©´ ì¼ë‹¨ ë“í…œì´ì§€~ğŸ›ï¸â€™',
      typeA: 'ì €ì¶•',
      typeB: 'ì†Œë¹„'
    },
    {
      img: '/images/cardTest/q6.png',
      text: '6ï¸âƒ£ í†µì¥ ì”ê³ ê°€ ë„‰ë„‰í•  ë•Œ ë‚˜ëŠ”?',
      A: 'â€˜ì´ë²ˆ ë‹¬ì€ ë” ëª¨ì•„ì•¼ì§€!â€™ í•˜ê³  í†µì¥ ë³´ë©° ë¿Œë“¯í•˜ë‹¤.',
      B: 'â€˜ì´ ì •ë„ë©´ ë­ í•˜ë‚˜ ì‚¬ë„ ë˜ê² ëŠ”ë°?â€™ í•˜ê³  ì¥ë°”êµ¬ë‹ˆë¶€í„° ì°¾ëŠ”ë‹¤.',
      typeA: 'ì €ì¶•',
      typeB: 'ì†Œë¹„'
    },
    {
      img: '/images/cardTest/q7.png',
      text: '7ï¸âƒ£ í° ëˆ ì“¸ ë•?',
      A: 'ë¹„êµí•˜ê³  ì ë¦½í•˜ê³  ì‹ ì¤‘ğŸ—‚ï¸',
      B: 'ê³ ë¯¼í•˜ë‹¤ ê·€ì°®ìœ¼ë©´ ê·¸ëƒ¥ ì‚¼',
      typeA: 'ê³„íš',
      typeB: 'ì¶©ë™'
    },
    {
      img: '/images/cardTest/q8.png',
      text: '8ï¸âƒ£ ì‡¼í•‘ëª° ë“¤ì–´ê°€ë©´?',
      A: 'ì‚´ ê±°ë§Œ ë”± ë³´ê³  ë‚˜ì˜´',
      B: 'ëŒì•„ë‹¤ë‹ˆë‹¤ê°€ ê´‘ê³ ì— í™€ë ¤ì„œ ì´ê²ƒì €ê²ƒ ë‹´ìŒ',
      typeA: 'ê³„íš',
      typeB: 'ì¶©ë™'
    },
    {
      img: '/images/cardTest/q9.png',
      text: '9ï¸âƒ£ ê²°ì œ ì§ì „ ë‚´ ë£¨í‹´ì€?',
      A: 'â€˜ì¿ í°, í¬ì¸íŠ¸ ì‹¹ ëª¨ì•„ì„œ ë°›ì„ ìˆ˜ ìˆëŠ” í• ì¸ì€ ë‹¤ ë°›ì•„ì•¼ì§€!â€™',
      B: 'â€˜ì•„ì›… ê·€ì°®ì•„..â€™ ê·¸ëƒ¥ ê²°ì œ ëˆ„ë¥´ê³  ëğŸ‘†',
      typeA: 'ê³„íš',
      typeB: 'ì¶©ë™'
    }
  ];

  // ê²°ê³¼ ìœ í˜• ì´ë¦„, ì„¤ëª…
	const resultMap = {
	  'ONLINE-SAVE-PLAN': {
	    id: 1,
	    name: 'í†µì¥ ì² ì˜¹ì„±',
	    front: 'ìƒˆëŠ” ëˆë„ ë‹¤ì‹œ ë³´ì!\nì§€ë¦„ì‹ ì´ ì™€ë„ ì² ë²½ìˆ˜ë¹„í•˜ëŠ”',
	    percentage: 'í……ì¥ë ¥ 10%',
	    back: 'ê¼¼ê¼¼í•˜ê²Œ ë¹„êµí•˜ì—¬ ì†Œë¹„í•˜ëŠ” ë‹¹ì‹ !\nì”ê³ ê°€ ìŒ“ì´ëŠ” í†µì¥ì„ ë³´ë©´ ë°¥ ì•ˆ ë¨¹ì–´ë„ ë°°ë¶€ë¥´ë‹¤~~',
	    card: {
	      name: 'Myí”ŒëŸ¬ìŠ¤ì¹´ë“œ',
	      reason: 'ì˜¨ë¼ì¸ ê²°ì œÂ·ìë™ì´ì²´ í• ì¸ ì§‘ì¤‘, ê³„íšì  ì €ì¶•ì— ì í•©í•œ'
	    }
	  },
	  'OFFLINE-SAVE-PLAN': {
	    id: 2,
	    name: 'ëª…ì˜ˆ í†µì¥ì§€í‚´ì´',
	    front: 'í†µì¥.. ë„Œ ë‚´ê°€ ì§€í‚¨ë‹¤.\nì‹œì¼œì¤˜ ë„ˆë§Œì˜',
	    percentage: 'í……ì¥ë ¥ 20%',
	    back: 'ì§€ë¦„ì‹ ì´ ì°¾ì•„ì˜¤ëŠ” ê·¸ ìˆœê°„ì—ë„\nì´ì„±ì˜ ëˆì„ ë†“ì§€ ì•ŠëŠ” ëª…ì˜ˆ í†µì¥ì§€í‚´ì´!',
	    card: {
	      name: 'Green ì¹´ë“œ',
	      reason: 'êµí†µ, ì£¼ìœ , í¸ì˜ì  ë“± ì˜¤í”„ë¼ì¸ ìƒí™œë°€ì°© í• ì¸ìœ¼ë¡œ ì ˆì•½ì— ìœ ë¦¬í•œ'
	    }
	  },
	  'ONLINE-SAVE-IMPULSE': {
	    id: 3,
	    name: 'íŒ”ë‘íŒ”ë‘ íŒ”ë‘ê·€',
	    front: 'ë¶„ëª…íˆ ê³„íšì— ì—†ì—ˆëŠ”ë°..\nì–´ë¼ëìŠ¤íƒ€?',
	    percentage: 'í……ì¥ë ¥ 40%',
	    back: 'ì²˜ìŒ ê³„íšê³¼ëŠ” ë‹¤ë¥´ê²Œ ì ì  ëŠ˜ì–´ë‚˜ëŠ” ì†Œë¹„..\në¶„ëª…íˆ í†µì¥ ì”ê³ ê°€ ìˆì—ˆëŠ”ë°ìš”? ì—†ì–´ì¡ŒìŠµë‹ˆë‹¤?',
	    card: {
	      name: 'ì˜¤ëŠ˜ì€e ì‹ ìš©ì¹´ë“œ',
	      reason: 'ì˜¨ë¼ì¸ ìƒí™œì„œë¹„ìŠ¤ ë° ì¶©ë™ì„± ì†Œë¹„ í• ì¸ê³¼ ì¼ë¶€ ì €ì¶•ì„± í˜œíƒ í¬í•¨ëœ'
	    }
	  },
	  'OFFLINE-SAVE-IMPULSE': {
	    id: 4,
	    name: 'ë¬´ê³„íš ì§€ì¶œëŸ¬',
	    front: 'ë‚˜ëŠ” ê°€ë” ëˆˆë¬¼ì„ í˜ë¦°ë‹¤..â­',
	    percentage: 'í……ì¥ë ¥ 50%',
	    back: 'ì €ì¶•ë„ ì—´ì‹¬ì´ì§€ë§Œ ì†Œë¹„ë„ ì—´ì‹¬íˆ í•˜ëŠ” ë‹¹ì‹ !\në‚´ í†µì¥ì€ ìš¸ì§€ë§Œ ì ê¹ì´ë‚˜ë§ˆ í–‰ë³µí–ˆìœ¼ë‹ˆ ê·¸ê±¸ë¡œ ëœ ê±° ì•„ë‹ê¹Œ..? ã…œ',
	    card: {
	      name: 'SK OIL&LPGì¹´ë“œ',
	      reason: 'ì£¼ìœ  íŠ¹í™” í• ì¸ìœ¼ë¡œ ì˜¤í”„ë¼ì¸ ì†Œì•¡ ì¶©ë™ê³¼ ì €ì¶• ë°©ì–´ ê°€ëŠ¥í•œ'
	    }
	  },
	  'ONLINE-SPEND-PLAN': {
	    id: 5,
	    name: 'ê³„íšì†Œë¹„ëŸ¬',
	    front: 'ì € ê²°ì‹¬í–ˆì–´ìš”. ëˆ ì“¸ ê²°ì‹¬..',
	    percentage: 'í……ì¥ë ¥ 60%',
	    back: 'ë‚´ ì†Œë¹„ì—” ë‹¤ ê³„íšì´ ìˆë‹¤êµ¬~\nì´ ì •ë„ëŠ” ì¨ì¤˜ì•¼ ì¸ìƒ ì‚´ ë§› ë‚˜ì§€!! ì˜¤ëŠ˜ë„ ì˜¨ë¼ì¸ ì‡¼í•‘ í•œë²ˆ í•´ë³¼ê¹Œ~',
	    card: {
	      name: 'BNK ë¶€ìë˜ì„¸ìš” í™ˆì‡¼í•‘ì¹´ë“œ',
	      reason: 'í™ˆì‡¼í•‘ê³¼ ì˜¨ë¼ì¸ ì‡¼í•‘ ê³„íšì  ì†Œë¹„ì— íŠ¹í™”ëœ'
	    }
	  },
	  'OFFLINE-SPEND-PLAN': {
	    id: 6,
	    name: 'ì†Œë¹„ìš”ì •',
	    front: 'ìš”ì • ë“±ì¥! ë‚´ê°€ ë‚˜ê°„ë‹¤!',
	    percentage: 'í……ì¥ë ¥ 70%',
	    back: 'ë…¸ëŠ” ê²Œ ì œì¼ ì¢‹ì•„!\në°–ì— ë‚˜ê°€ë©´ ì¼ë‹¨ ì§€ê°‘ë¶€í„° ì—¬ëŠ” ì†Œë¹„ìš”ì •!! ê·¸ëŸ°ë° ì–´ë””ì„œ ìš°ëŠ” ì†Œë¦¬ ì•ˆ ë“¤ë¦¬ë‚˜ìš”? í†µì¥ ìš°ëŠ” ì†Œë¦¬..',
	    card: {
	      name: 'ë¶€ì‚°ì²´ìœ¡ì‚¬ë‘ì¹´ë“œ',
	      reason: 'ìŠ¤í¬ì¸ , ì˜ë£Œ, ë¬¸í™” ë“± ì˜¤í”„ë¼ì¸ ê³„íšì  ì§€ì¶œì— ë§ì¶¤ í• ì¸ì´ ê°€ëŠ¥í•œ'
	    }
	  },
	  'ONLINE-SPEND-IMPULSE': {
	    id: 7,
	    name: 'ì´ êµ¬ì—­ ì§€ë¦„ì‹ ',
	    front: 'í•¸ë“œí°ë§Œ í‚¤ë©´ ì™œ ì”ê³ ê°€ ì¤„ì¤„ ìƒˆë‹ˆ..',
	    percentage: 'í……ì¥ë ¥ 90%',
	    back: 'ì¼ë‹¨ ë‹´ê³ ë³´ì!\nì¥ë°”êµ¬ë‹ˆê°€ í•­ìƒ í’€ë¡œ ì°¨ìˆëŠ”.. ì˜¤ëŠ˜ ë°¤ ì§€ë¦„ì‹ ì€ ë‚˜ì•¼ ë‚˜!',
	    card: {
	      name: 'Dynamic ì¹´ë“œ',
	      reason: 'OTT, ë°°ë‹¬, ê°„í¸ê²°ì œ ë“± ì¶©ë™ì„± ì˜¨ë¼ì¸ ì†Œë¹„ ì ë¦½ì— ìµœì í™” ëœ'
	    }
	  },
	  'OFFLINE-SPEND-IMPULSE': {
	    id: 8,
	    name: 'í”„ë¡œíƒ•ì§„ëŸ¬',
	    front: 'ì‚¬ê³ ì‹¶ì€ ê±´ ëª» ì°¸ì•„ ë‹¤ ì‚¬ê³ ë§í…Œì•¼!!',
	    percentage: 'í……ì¥ë ¥ 100%',
	    back: 'ì´ê²ƒë„ ë‚´ ê±°, ì €ê²ƒë„ ë‚´ ê±°..\në§˜ì— ë“œëŠ” ê±´ ë‹¤ ë‚´ ê±°ì•¼! ì¼ë‹¨ ë§˜ì— ë“œëŠ” ê±´ ì‚¬ê³ ë³´ëŠ” í”„ë¡œíƒ•ì§„ëŸ¬',
	    card: {
	      name: 'ë”©ë”© ì²´í¬ì¹´ë“œ',
	      reason: 'ì™¸ì‹, ì¹´í˜, ì˜í™” ë“± ì˜¤í”„ë¼ì¸ ì¶©ë™ì„± ì†Œë¹„ì— íŠ¹í™”ëœ'
	    }
	  }
	};



  let current = 0;
  let counts = { ì˜¨ë¼ì¸: 0, ì˜¤í”„ë¼ì¸: 0, ì €ì¶•: 0, ì†Œë¹„: 0, ê³„íš: 0, ì¶©ë™: 0 };
  let lastAnswers = [];

  function startTest() {
    document.getElementById('start-section').classList.remove('active');
    document.getElementById('question-section').classList.add('active');
    showQuestion();
  }

  function showQuestion() {
    const q = questions[current];
    document.getElementById('question-img').src = q.img;
    document.getElementById('question-text').innerText = q.text;
    document.querySelectorAll('.option-btn')[0].innerText = `${q.A}`;
    document.querySelectorAll('.option-btn')[1].innerText = `${q.B}`;

    const progressPercent = ((current + 1) / questions.length) * 100;
    document.getElementById('progress-fill').style.width = `${progressPercent}%`;
    document.getElementById('progress-text').innerText = `${current + 1} / ${questions.length}`;
  }

  function selectOption(option) {
    const q = questions[current];
    const selectedType = option === 'A' ? q.typeA : q.typeB;
    counts[selectedType]++;
    lastAnswers.push(selectedType);
    current++;
    if (current < questions.length) {
      showQuestion();
    } else {
      finishTest();
    }
  }

  function goBack() {
    if (current > 0) {
      const lastSelectedType = lastAnswers.pop();
      if (lastSelectedType) {
        counts[lastSelectedType]--;
      }
      current--;
      showQuestion();
    }
  }

  function finishTest() {
	  document.getElementById('question-section').classList.remove('active');
	  document.getElementById('result-section').classList.add('active');

	  const type1 = counts.ì˜¨ë¼ì¸ >= counts.ì˜¤í”„ë¼ì¸ ? 'ONLINE' : 'OFFLINE';
	  const type2 = counts.ì €ì¶• >= counts.ì†Œë¹„ ? 'SAVE' : 'SPEND';
	  const type3 = counts.ê³„íš >= counts.ì¶©ë™ ? 'PLAN' : 'IMPULSE';
	  const resultType = `${type1}-${type2}-${type3}`;

	  const result = resultMap[resultType] || { id: 0, name: 'ì•Œ ìˆ˜ ì—†ìŒ' };

	  // ìˆœì„œ: front -> name -> result img -> percentage -> back
	  const resultHTML = `
	    <p style="font-size: 20px; white-space: pre-line; margin-bottom: 10px;">${result.front}</p>
	    <h2 style="font-size: 28px; margin: 10px 0;">${result.name}</h2>
	    <img src="/images/cardTest/r${result.id}.png" alt="ê²°ê³¼ ì´ë¯¸ì§€"
	        style="display:block; margin: 15px auto; max-width: 400px; border-radius: 8px;" />

	    <p style="font-size: 16px; margin: 10px 0;">${result.percentage}</p>
	    <p style="font-size: 12px; color: #555; white-space: pre-line; margin: 10px 0;">${result.back}</p>
	  `;

	  document.getElementById('result-title').innerHTML = resultHTML;

	  // ì¶”ì²œì¹´ë“œ ì´ìœ  + ì¹´ë“œ ì´ë¯¸ì§€ + ì¹´ë“œ ì´ë¦„
		const container = document.getElementById('recommended-cards');
		container.innerHTML = `
		  <p style="font-size: 14px; color: #333; margin: 10px 0; white-space: pre-line;">
		    ${result.card.reason}
		  </p>
		`;

	  fetch('/card/card_test_result', {
	    method: 'POST',
	    headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
	    body: 'resultId=' + result.id
	  })
	  .then(res => res.json())
	  .then(cards => {
	    cards.forEach(card => {
	      container.innerHTML += `
	    	  <div class="card-item" style="text-align: center;">
	          <img src="/images/cards/${card.cardId}_front.PNG" alt="${card.name}" style="max-width:200px; border-radius:8px;" />
	          <h4 style="font-size: 18px; margin: 5px 0;">${card.name}</h4>
	        </div>
	      `;
	    });
	  });
	}


</script>


</body>
</html>
