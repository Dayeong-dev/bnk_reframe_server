<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8" />
<title>ì†Œë¹„ì„±í–¥ í…ŒìŠ¤íŠ¸</title>
<style>
body {
	font-family: Arial, sans-serif;
	text-align: center;
}

.section {
	display: none;
	padding: 40px;
}

.section.active {
	display: block;
}

.question {
	margin: 30px 0;
}

.option-btn {
	padding: 15px 30px;
	margin: 10px;
	cursor: pointer;
	font-size: 18px;
}

.card-list {
	display: flex;
	flex-wrap: wrap;
	justify-content: center;
	margin-top: 30px;
}

.card-item {
	width: 200px;
	margin: 10px;
	border: 1px solid #ccc;
	border-radius: 8px;
	padding: 10px;
}

.card-item img {
	width: 100%;
	border-radius: 5px;
}
</style>
</head>

<body>
	<h1>ğŸ’³ ë‚´ í†µì¥ì´ í……ì¥ì´ ëœ ì´ìœ ëŠ”?</h1>

	<!-- ì‹œì‘í™”ë©´ -->
	<div id="start-section" class="section active">
		<img src="/images/card_test_main.png" alt="í……ì¥ ë¶„ì„ê¸°" width="400" />
		<h2>í……ì¥ë¶„ì„ê¸° í…ŒìŠ¤íŠ¸</h2>
		<p>ë‚´ í†µì¥ì´ í……ì¥ì´ ëœ ì´ìœ ë¥¼ ë¶„ì„í•´ë“œë¦½ë‹ˆë‹¤!</p>
		<p>ë‚˜ì˜ ì†Œë¹„ì„±í–¥ì„ í™•ì¸í•´ë³´ì„¸ìš”!</p>
		<button onclick="startTest()">í…ŒìŠ¤íŠ¸ ì‹œì‘</button>
	</div>

	<!-- ì§ˆë¬¸ í™”ë©´ -->
	<div id="question-section" class="section">
		<img id="question-img" src="" alt="ì§ˆë¬¸ ì´ë¯¸ì§€" width="300" />
		<div id="question-text" class="question"></div>
		<div>
			<button class="option-btn" onclick="selectOption('A')">A</button>
			<button class="option-btn" onclick="selectOption('B')">B</button>
		</div>
		<div id="progress"></div>
	</div>

	<!-- ê²°ê³¼ í™”ë©´ -->
	<div id="result-section" class="section">
		<h2 id="result-title"></h2>
		<img id="result-img" src="" alt="ê²°ê³¼ ì´ë¯¸ì§€" width="400" />
		<p id="result-desc"></p>
		<h3>ì¶”ì²œ ì¹´ë“œ</h3>
		<div id="recommended-cards" class="card-list"></div>
	</div>

	<script>
    // ì§ˆë¬¸ ë°ì´í„°
    const questions = [
  {
    img: '/images/test/q1.png',
    text: '1ï¸âƒ£ ì‡¼í•‘í•  ë•Œ ë” ì„¤ë ˆëŠ” ìˆœê°„ì€?',
    A: 'íƒë°° ë„ì°© ì•Œë¦¼ ë˜‘ë”±ğŸ“¦',
    B: 'ë§¤ì¥ ê°€ì„œ ì‹¤ë¬¼ ë”± ë³´ëŠ” ìˆœê°„âœ¨',
    typeA: 'ì˜¨ë¼ì¸',
    typeB: 'ì˜¤í”„ë¼ì¸'
  },
  {
    img: '/images/test/q2.png',
    text: '2ï¸âƒ£ ê²°ì œí•  ë•?',
    A: 'â€˜í°ë§Œ ìˆìœ¼ë©´ ë! ê°„í¸ê²°ì œ ìµœê³ â€™',
    B: 'â€˜ì¹´ë“œ êº¼ë‚´ì„œ ê¸ëŠ” ë§› ìˆì–´ì•¼ì§€~â€™',
    typeA: 'ì˜¨ë¼ì¸',
    typeB: 'ì˜¤í”„ë¼ì¸'
  },
  {
    img: '/images/test/q3.png',
    text: '3ï¸âƒ£ ê¸‰í•˜ê²Œ í•„ìš”í•œ ë¬¼ê±´ì´ ìƒê²¼ì„ ë•?',
    A: 'â€˜ì´ëŸ´ ë• ë¡œì¼“ ë°°ì†¡!! ë°”ë¡œ ì£¼ë¬¸ ã„± ã„±â€™',
    B: 'â€˜ì§€ê¸ˆ ë‚˜ê°€ì„œ ì‚¬ì™€ì•¼ì§€!!â€™',
    typeA: 'ì˜¨ë¼ì¸',
    typeB: 'ì˜¤í”„ë¼ì¸'
  },
  // ì´í•˜ ë™ì¼ íŒ¨í„´ìœ¼ë¡œ~
  {
    img: '/images/test/q4.png',
    text: '4ï¸âƒ£ ì›”ê¸‰ ë“¤ì–´ì˜¤ë©´ ì œì¼ ë¨¼ì € í•˜ëŠ” ìƒê°?',
    A: 'â€˜ì¼ë‹¨ ì €ì¶•ë¶€í„° í•˜ê³ .. ë‚¨ì€ ëˆìœ¼ë¡œ ë²„í…¨ë³´ì!â€™',
    B: 'â€˜íœ´ í•œë‹¬ë™ì•ˆ ë„˜ ê³ ìƒí–ˆë‹¤~~ ì˜¤ëŠ˜ì€ ì—½ë–¡ì— í—ˆë‹ˆì½¤ë³´~~â€™',
    typeA: 'ì €ì¶•',
    typeB: 'ì†Œë¹„'
  },
  {
    img: '/images/test/q5.png',
    text: '5ï¸âƒ£ í• ì¸ ì¿ í°ì´ ìƒê²¼ì„ ë•Œ ë‚˜ëŠ”?',
    A: 'â€˜ì•„ê¹ì§€ë§Œ.. í•„ìš”í•œ ê±´ ì•„ë‹ˆë‹ˆê¹ ì•ˆ ì‚´ë˜ğŸ™…â€â™€ï¸â€™',
    B: 'â€˜ì‹¸ë©´ ì¼ë‹¨ ë“í…œì´ì§€~ğŸ›ï¸â€™',
    typeA: 'ì €ì¶•',
    typeB: 'ì†Œë¹„'
  },
  {
    img: '/images/test/q6.png',
    text: '6ï¸âƒ£ í†µì¥ ì”ê³ ê°€ ë„‰ë„‰í•  ë•Œ ë‚˜ëŠ”?',
    A: 'â€˜ì´ë²ˆ ë‹¬ì€ ë” ëª¨ì•„ì•¼ì§€!â€™ í•˜ê³  í†µì¥ ë³´ë©° ë¿Œë“¯í•˜ë‹¤.',
    B: 'â€˜ì´ ì •ë„ë©´ ë­ í•˜ë‚˜ ì‚¬ë„ ë˜ê² ëŠ”ë°?â€™ í•˜ê³  ì¥ë°”êµ¬ë‹ˆë¶€í„° ì°¾ëŠ”ë‹¤.',
    typeA: 'ì €ì¶•',
    typeB: 'ì†Œë¹„'
  },
  {
    img: '/images/test/q7.png',
    text: '7ï¸âƒ£ í° ëˆ ì“¸ ë•?',
    A: 'ë¹„êµí•˜ê³  ì ë¦½í•˜ê³  ì‹ ì¤‘ğŸ—‚ï¸',
    B: 'ê³ ë¯¼í•˜ë‹¤ ê·€ì°®ìœ¼ë©´ ê·¸ëƒ¥ ì‚¼',
    typeA: 'ê³„íš',
    typeB: 'ì¶©ë™'
  },
  {
    img: '/images/test/q8.png',
    text: '8ï¸âƒ£ ì‡¼í•‘ëª° ë“¤ì–´ê°€ë©´?',
    A: 'ì‚´ ê±°ë§Œ ë”± ë³´ê³  ë‚˜ì˜´',
    B: 'ëŒì•„ë‹¤ë‹ˆë‹¤ê°€ ê´‘ê³ ì— í™€ë ¤ì„œ ì´ê²ƒì €ê²ƒ ë‹´ìŒ',
    typeA: 'ê³„íš',
    typeB: 'ì¶©ë™'
  },
  {
    img: '/images/test/q9.png',
    text: '9ï¸âƒ£ ê²°ì œ ì§ì „ ë‚´ ë£¨í‹´ì€?',
    A: 'â€˜ì¿ í°, í¬ì¸íŠ¸ ì‹¹ ê¸ì–´ ëª¨ì•„ì„œ ë°›ì„ ìˆ˜ ìˆëŠ” í• ì¸ì€ ë‹¤ ë°›ì„í…Œë‹¤!!â€™',
    B: 'â€˜ì•„ì›… ê·€ì°®ì•„..â€™ ê·¸ëƒ¥ ê²°ì œ ëˆ„ë¥´ê³  ëğŸ‘†',
    typeA: 'ê³„íš',
    typeB: 'ì¶©ë™'
  }
];


    let current = 0;
    let counts = { ì˜¨ë¼ì¸:0, ì˜¤í”„ë¼ì¸:0, ì €ì¶•:0, ì†Œë¹„:0, ê³„íš:0, ì¶©ë™:0 };

    function startTest() {
      document.getElementById('start-section').classList.remove('active');
      document.getElementById('question-section').classList.add('active');
      showQuestion();
    }

    function showQuestion() {
    	  const q = questions[current];
    	  document.getElementById('question-img').src = q.img;
    	  document.getElementById('question-text').innerText = q.text;
    	  document.querySelectorAll('.option-btn')[0].innerText = `A. ${q.A}`;
    	  document.querySelectorAll('.option-btn')[1].innerText = `B. ${q.B}`;
    	  document.getElementById('progress').innerText = `${current+1} / ${questions.length}`;
    	}

    function selectOption(option) {
    	  const q = questions[current];
    	  const selectedType = option === 'A' ? q.typeA : q.typeB;
    	  counts[selectedType]++;
    	  current++;
    	  if (current < questions.length) {
    	    showQuestion();
    	  } else {
    	    finishTest();
    	  }
    	}

    function finishTest() {
      document.getElementById('question-section').classList.remove('active');
      document.getElementById('result-section').classList.add('active');

      // ê²°ê³¼ìœ í˜• ê³„ì‚°
      const type1 = counts.ì˜¨ë¼ì¸ >= counts.ì˜¤í”„ë¼ì¸ ? 'ONLINE' : 'OFFLINE';
      const type2 = counts.ì €ì¶• >= counts.ì†Œë¹„ ? 'SAVE' : 'SPEND';
      const type3 = counts.ê³„íš >= counts.ì¶©ë™ ? 'PLAN' : 'IMPULSE';
      const resultType = `${type1}-${type2}-${type3}`;

      document.getElementById('result-title').innerText = `ë‹¹ì‹ ì˜ ì†Œë¹„ìœ í˜•ì€ ${resultType}!`;
      document.getElementById('result-img').src = `/images/test/result/${resultType}.png`;
      document.getElementById('result-desc').innerText = `${resultType} ìœ í˜• ì„¤ëª…ì´ ì—¬ê¸°ì— ë“¤ì–´ê°‘ë‹ˆë‹¤.`;

      // ì„œë²„ì— ì €ì¥ + ì¶”ì²œì¹´ë“œ ë°›ê¸°
      fetch('/card/card_test_result', {
        method: 'POST',
        headers: {'Content-Type': 'application/x-www-form-urlencoded'},
        body: 'resultType=' + resultType
      })
      .then(res => res.json())
      .then(cards => {
        const container = document.getElementById('recommended-cards');
        container.innerHTML = '';
        cards.forEach(card => {
          container.innerHTML += `
            <div class="card-item">
              <img src="/images/cards/${card.cardId}_front.PNG" alt="${card.name}" />
              <h4>${card.name}</h4>
              <p>${card.description}</p>
            </div>`;
        });
      });
    }
  </script>
</body>
</html>
